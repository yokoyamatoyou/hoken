# 本番開発指示書

このドキュメントでは、既存のローカル向けMVPを残したまま、本番環境向けの機能開発を進める手順をまとめます。AGENTS.md のフェーズ6で説明されているテスト、デプロイメント戦略、オブザーバビリティ導入を実施しながら、リポジトリ構造を整理していきます。

## 1. ディレクトリ構成

```
/ (リポジトリルート)
|-- mvp/                 # ローカル用MVPのランチャーなどを格納
|   `-- run_mvp.bat      # MVP起動用スクリプト
|-- prod/                # 本番向けの設定やスクリプトを追加していく予定
|-- docs/                # 本ドキュメントなど、開発資料を配置
|-- src/                 # 共有ソースコード
```

- **mvp/**: 既存の実装をそのまま利用するための簡易ランチャーを置きます。コードは `src/` を共通で使用します。
- **prod/**: パッケージング用スクリプトやデプロイ設定ファイル（例: Dockerfile, CI 設定）を追加していく場所です。

## 2. 本番化に向けたタスク

1. **パッケージング**
   - PyInstaller で単一の実行ファイルを生成するか、コンテナ化 (Docker) を検討します。
   - 生成手順や使用方法を `prod/README.md` にまとめます。
2. **オブザーバビリティの導入**
   - `setup_logging` を拡張し、ログファイル保存先を切り替えられるようにします。
   - 将来的には APM などの監視ツールとの連携を想定します。
3. **テスト拡充**
   - パッケージ化後の起動確認や、CLI/GUI の統合テストを追加します。
   - AGENTS.md に記載されている通り、単体・結合テストを充実させます。

## 3. 開発フロー

- 現在の `src/` 以下のコードを直接編集しても問題ありません。MVP の動作確認は `mvp/run_mvp.bat` で行います。
- 本番向けの設定ファイルや新しいスクリプトは `prod/` に追加します。
- 機能追加や挙動の変更を行ったら、既存テストを更新し、`pytest` が通ることを確認してください。

## 4. 参考

- 詳細な背景や段階的な実装ロードマップは `AGENTS.md` を参照してください。
- 開発環境のセットアップや既存機能の利用方法は `README.md` を参照してください。

